\documentclass[12pt, letterpaper, spanish]{report} % to have chapters
\usepackage{fontspec}
% \setmainfont{Arial}
% \setmainfont[
% BoldFont=timesbd.ttf,
% ItalicFont=timesi.ttf,
% BoldItalicFont=timesbi.ttf,
% ]{times.ttf}
% % Arial
\setmainfont[
% SizeFeatures={Size=12},
Scale=1.0909,
BoldFont=arialbd.ttf,
ItalicFont=ariali.ttf,
BoldItalicFont=arialbi.ttf
]{arial.ttf}
% \renewcommand{\familydefault}{\sfdefault}
% % Courier New
% \setmonofont[Scale=0.90,
% BoldFont=courbd.ttf,
% ItalicFont=couri.ttf,
% BoldItalicFont=courbi.ttf,
% Color={red}
% ]{cour.ttf}
\usepackage{blindtext} % to quickly get a full document
\usepackage{import}
% SPANISH TITLES, TOC, TOF, TOT
\usepackage[spanish]{babel}

% IMPORT CHAPTERS
\usepackage{tikz}
% TITLEPAGE FRAMEs
% \usepackage{tikz}
\usetikzlibrary{calc}
\newcommand\HRule{\rule{\textwidth}{1pt}}
% TODOS PACKAGE -- DISABLE LATER
\usepackage[colorinlistoftodos]{todonotes}
\newcounter{todocounter}
\newcommand{\todonum}[2][]{
    \stepcounter{todocounter}
    \todo[color=orange, #1]{(Cap. \arabic{chapter}) \thetodocounter: #2}
}
\newcommand{\addref}[2][]{\todonum[color=blue!40, #1]{Add Ref. #2}}
\newcommand{\rewrite}[2][]{\todonum[color=green!40, #1]{#2}}
\newcommand{\urgent}[2][]{\todonum[color=red!40, #1]{#2}}
% EXAMPLES
% \todonum[inline]{hello}
% \addref[inline]{asdasdas}
% \rewrite{hello}
% \urgent{hello}

% STRIKETHROUGH -- DISABLE LATER
\usepackage[normalem]{ulem}
\definecolor{mypink2}{RGB}{170, 47, 55}

% TOC LINKABLE -- DISABLE LATER
\usepackage{hyperref}
\hypersetup{
    linktocpage,
    % pdfhighlight=/N,
    colorlinks,
    allcolors = blue,
    filecolor=blue,
    % linkcolor=blue,
    % urlcolor=blue
}
\usepackage{url}
\usepackage[all]{hypcap}
% \numberwithin{equation}{section}
% \numberwithin{figure}{section}
% \numberwithin{table}{section}
% FONTS AND LANGUAGE
% \usepackage[T1]{fontenc}
% \usepackage{selinput}
% \SelectInputMappings{%
%     aacute={á},
%     ntilde={ñ},
%     Euro={€}
%     }
% \usepackage{helvet}
% \renewcommand{\familydefault}{\sfdefault}
% IMAGES AND FIGURES
\usepackage{graphicx}
\graphicspath{ {images/} }
\usepackage{float}
% BIBLIOGRAPHY TABLES
\usepackage{apacite}
\usepackage{booktabs}

\usepackage{csquotes}
% \usepackage[
%     backend=biber,
%     sorting=ynt,
%     style=apa, maxbibnames=9,maxcitenames=2,uniquelist=false
% ]{biblatex}
% \DefineBibliographyStrings{spanish}{andothers={et~al\adddot}}

% \DeclareLanguageMapping{english}{american-apa}
% \addbibresource{bibliography.bib}

% EXTRA FORMATTING
\usepackage{parskip} % page indentation and page breaks
\tolerance=1
\emergencystretch=\maxdimen
\hyphenpenalty=10000
\hbadness=10000
% EMPTY PAGES
\usepackage{afterpage}

\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}

% PAGE STYLING & FORMAT
\usepackage{fancyhdr}

\usepackage[
    top=2.5cm,
    bottom=2.5cm,
    left=4cm,
    right=2.5cm,
    headheight=33pt, % as per the warning by fancyhdr
    includehead,includefoot,
    heightrounded, % to avoid spurious underfull messages
]{geometry} 

\fancyhf{}
\fancyhead[R]{\footnotesize\leftmark}
\fancyhead[C,L]{}
\fancyfoot[R]{\thepage}
\fancyfoot[C]{}
\fancyfoot[L]{\textit{\footnotesize Aplicación Nativa de la Nube con ALPR para el Control Vehicular para QSS Bolivia
}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}
% STYLE FOR FIRST PAGES
\fancypagestyle{plain}{
    \fancyhf{}
    \fancyhead[R]{}
    \fancyhead[C,L]{}
    \fancyfoot[R]{\thepage}
    \fancyfoot[C]{}
    \fancyfoot[L]{\textit{\footnotesize Aplicación Nativa de la Nube con ALPR para el Control Vehicular para QSS Bolivia
    }}
    \renewcommand{\headrulewidth}{0pt}
}
%FIRST PAGES
\fancypagestyle{first-pages}{
    \fancyhf{}
    \fancyhead[R]{}
    \fancyhead[C,L]{}
    \fancyfoot[R]{\thepage}
    \fancyfoot[C]{}
    \fancyfoot[L]{}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0pt}
}

% OTHER STYLINGS
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}
\renewcommand{\chaptername}{CAPITULO }
\renewcommand{\thechapter}{\Roman{chapter}}
\renewcommand{\thesection}{\arabic{chapter}.\arabic{section}}
\renewcommand{\thefigure}{\arabic{chapter}.\arabic{figure}}
\renewcommand{\thetable}{\arabic{chapter}.\arabic{table}}

\pagestyle{fancy}
\usepackage{array, booktabs}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash}m{#1}}
\usepackage{longtable}
% APPENDIX
% \usepackage{indentfirst}
% \usepackage{setspace}

% \usepackage{titlesec}
%   \titleformat{\chapter}
%       {\normalfont \center}{\thechapter}{1em}{}
%   \titlespacing*{\chapter}{0pt}{-.5 in}{0.35in}
%   \renewcommand{\thechapter}{\Roman{chapter}}
% \renewcommand*\contentsname{TABLE OF CONTENTS}

% \usepackage[margin=1in]{geometry}
% 
\usepackage{tocloft}
\usepackage{lscape}
% \usepackage{rotating}
% \setlength{\cftfigurenumwidth}{20mm}
% \setlength{\cfttablenumwidth}{20mm}
\addtolength\cftfignumwidth{1em}
\addtolength\cfttabnumwidth{1em}
\addtolength\cftchapnumwidth{1em}
\addtolength\cftsecnumwidth{1em}
\addtolength\cftsubsecnumwidth{1em}
\addtolength\cftsubsubsecnumwidth{1em}
\addtolength\cftsecindent{1em}

%   \renewcommand\cfttoctitlefont{\normalsize\normalfont}
%   \renewcommand\cftbeforetoctitleskip{0pt}
%   \renewcommand\cftaftertoctitleskip{2\baselineskip}
%   \setlength\cftchapnumwidth{3em}
%   \renewcommand\cftchapleader{\cftdotfill{\cftdotsep}}
%   \renewcommand\cftchapfont{\normalfont}
%   \renewcommand\cftchappagefont{\normalfont}

% It's good practice to load the hyperref package 
% late in the preamble
% \usepackage[hidelinks]{hyperref}
% CAPITULO DE IMPLEMENTACION

\usepackage{listings}
\usepackage{dirtree}
\usepackage{minted}
\usepackage{setspace}
\usepackage[bottom]{footmisc}
\usepackage{xcolor}
\definecolor{LightGray}{rgb}{0.95,0.95,0.95}
\usepackage{mdframed}
% \setmainfont[
% BoldFont=arialbd.ttf,
% ItalicFont=ariali.ttf,
% BoldItalicFont=arialbi.ttf
% ]{arial.ttf}
% \setmainfont{Times New Roman}
% \setmonofont[Color={0019D4}]{Courier New}
% \setsansfont{Calibri}
% \setmonofont{Consolas}
    \renewcommand{\baselinestretch}{1.6} 

\usepackage{abstract}
\renewcommand{\abstractname}{}    % clear the title
\renewcommand{\absnamepos}{empty} % originally center

\newcolumntype{M}{>{\centering\arraybackslash}m{\dimexpr.5\linewidth-2\tabcolsep}}

\makeatletter

\newcommand\frontmatter{%
    \cleardoublepage
  %\@mainmatterfalse
  \pagenumbering{Roman}}

\newcommand\mainmatter{%
 % \@mainmattertrue
  \pagenumbering{arabic}}

\newcommand\backmatter{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
 % \@mainmatterfalse
   }
\newcommand*\NewPage{\newpage\null\thispagestyle{first-pages}\newpage}
\makeatother

\usepackage{epigraph}
  \setlength\epigraphwidth{.6\textwidth}
\setlength\epigraphrule{0pt}
\usepackage{caption}
\usepackage{subcaption}


\captionsetup[figure]{font={stretch=1.6}}    %% change 1.2 as you like
% DOCUMENT
\title{Aplicación Nativa de la Nube con ALPR para el Control Vehicular para la Empresa QSS Bolivia}
\author{Juan Francisco Ribera Laszkowski}
\begin{document}

    \urlstyle{same}
    \renewcommand{\theFancyVerbLine}{
    \sffamily\textcolor[rgb]{0.5,0.5,0.5}{\scriptsize\arabic{FancyVerbLine}}}
    \renewcommand{\BRetrieved}[1]{Recuperado el {#1} de\ }%
    \renewcommand{\BRetrievedFrom}{Recuperado de\ }%
    \renewcommand{\BOthers}[1]{et al.\hbox{}}%       ``y colaboradores''
    \renewcommand{\BOthersPeriod}[1]{et al.\hbox{}}% ``y colaboradores''
    % Here is an example citation \parencite{Johnson1995-yr}.
    % Here is an example citation \cite{Onvif2016-dc}.

    % ADD FIRST PAGES
    \selectlanguage{spanish}
    \input{first-pages/titlepage}
    \afterpage{\blankpage}
    \afterpage{\blankpage}
    \input{first-pages/titlepage-inner}
    \input{first-pages/pre-acknoledgements}
    \afterpage{\blankpage}
    \input{first-pages/acknoledgements}

    \frontmatter % The pages after this command and before the command \mainmatter, will be numbered with lowercase Roman numerals.
    \input{first-pages/abstract}
    % \afterpage{\blankpage{first-pages}}
    \NewPage
    \input{first-pages/executive-summary}
    
    % TOC
    \tableofcontents
    \addtocontents{toc}{~\hfill\textbf{Pág.}\par}
    % \addcontentsline{toc}{chapter}{Contents}
    \newpage
    \listoffigures
    % \addcontentsline{toc}{chapter}{List of Figures}
    \newpage
    \listoftables
    % \addcontentsline{toc}{chapter}{List of Tables}

    % CHAPTERS
    % \addtocontents{toc}{\protect\setlength{\cftchapnumwidth}{8mm}}
    % \addtocontents{toc}{\protect\setlength{\cftsecnumwidth}{10mm}}
    % \addtocontents{toc}{\protect\setlength{\cftsecindent}{10mm}}
    \pagebreak
    \mainmatter % T
    \foreach \c in {1,...,9}{\import{chapters/}{chapter0\c.tex} }
    \foreach \c in {0,...,4}{\import{chapters/}{chapter1\c.tex} }
    % APPENDIXES
    \foreach \c in {1,...,1}{\import{appendixes/}{appendix0\c.tex} }

% This an \textit{example} of document compiled with \textbf{xelatex} compiler. If you have to write some code
% \blindtext[0]
% \begin{minted}[mathescape,
%               linenos,
%               numbersep=5pt,
%               gobble=2,
%               frame=lines,
%               framesep=2mm]{csharp}
%   string title = "This is a Unicode in the sky"

%   const double pi = 3.1415926535
% \end{minted}

    % BIBLIOGRAPHY
    \bibliographystyle{apacite}
    \bibliography{bibliography}
    % \printbibliography[heading=bibintoc]
\end{document}